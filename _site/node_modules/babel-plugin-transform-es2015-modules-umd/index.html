<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>babel-plugin-transform-es2015-modules-umd | estebang23.github.io</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="babel-plugin-transform-es2015-modules-umd" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/node_modules/babel-plugin-transform-es2015-modules-umd/" />
<meta property="og:url" content="http://localhost:4000/node_modules/babel-plugin-transform-es2015-modules-umd/" />
<meta property="og:site_name" content="estebang23.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/node_modules/babel-plugin-transform-es2015-modules-umd/","headline":"babel-plugin-transform-es2015-modules-umd","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=08194154e5c3f87742365edb210c0599bab19902">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">estebang23.github.io</a></h1>
      

      <h1 id="babel-plugin-transform-es2015-modules-umd">babel-plugin-transform-es2015-modules-umd</h1>

<blockquote>
  <p>This plugin transforms ES2015 modules to <a href="https://github.com/umdjs/umd">Universal Module Definition (UMD)</a>.</p>
</blockquote>

<h2 id="example">Example</h2>

<p><strong>In</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="mi">42</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Out</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nb">global</span><span class="p">,</span> <span class="nx">factory</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s2">"function"</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">define</span><span class="p">([</span><span class="s2">"exports"</span><span class="p">],</span> <span class="nx">factory</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">factory</span><span class="p">(</span><span class="nx">exports</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">mod</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">exports</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">};</span>
    <span class="nx">factory</span><span class="p">(</span><span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">);</span>
    <span class="nb">global</span><span class="p">.</span><span class="nx">actual</span> <span class="o">=</span> <span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
  <span class="s2">"use strict"</span><span class="p">;</span>

  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="s2">"__esModule"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">value</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">});</span>

  <span class="nx">exports</span><span class="p">.</span><span class="k">default</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install <span class="nt">--save-dev</span> babel-plugin-transform-es2015-modules-umd
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<h3 id="via-babelrc-recommended">Via <code class="highlighter-rouge">.babelrc</code> (Recommended)</h3>

<p><strong>.babelrc</strong></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"transform-es2015-modules-umd"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>You can also override the names of particular libraries when this module is
running in the browser.  For example the <code class="highlighter-rouge">es6-promise</code> library exposes itself
as <code class="highlighter-rouge">global.Promise</code> rather than <code class="highlighter-rouge">global.es6Promise</code>. This can be accommodated by:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"transform-es2015-modules-umd"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"globals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"es6-promise"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Promise"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="default-semantics">Default semantics</h4>

<p>There are a few things to note about the default semantics.</p>

<p><em>First</em>, this transform uses the
<a href="https://en.wikipedia.org/wiki/Basename">basename</a> of each import to generate
the global names in the UMD output. This means that if you’re importing
multiple modules with the same basename, like:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">fooBar1</span> <span class="k">from</span> <span class="s2">"foo-bar"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">fooBar2</span> <span class="k">from</span> <span class="s2">"./mylib/foo-bar"</span><span class="p">;</span>
</code></pre></div></div>

<p>it will transpile into two references to the same browser global:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">factory</span><span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">fooBar</span><span class="p">,</span> <span class="nb">global</span><span class="p">.</span><span class="nx">fooBar</span><span class="p">);</span>
</code></pre></div></div>

<p>If you set the plugin options to:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"globals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"foo-bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fooBAR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"./mylib/foo-bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mylib.fooBar"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>it will still transpile both to one browser global:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">factory</span><span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">fooBAR</span><span class="p">,</span> <span class="nb">global</span><span class="p">.</span><span class="nx">fooBAR</span><span class="p">);</span>
</code></pre></div></div>

<p>because again the transform is only using the basename of the import.</p>

<p><em>Second</em>, the specified override will still be passed to the <code class="highlighter-rouge">toIdentifier</code>
function in <a href="https://github.com/babel/babel/blob/master/packages/babel-types/src/converters.js">babel-types/src/converters</a>.
This means that if you specify an override as a member expression like:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"globals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"fizzbuzz"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fizz.buzz"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>this will <em>not</em> transpile to <code class="highlighter-rouge">factory(global.fizz.buzz)</code>. Instead, it will
transpile to <code class="highlighter-rouge">factory(global.fizzBuzz)</code> based on the logic in <code class="highlighter-rouge">toIdentifier</code>.</p>

<p><em>Third</em>, you cannot override the exported global name.</p>

<h4 id="more-flexible-semantics-with-exactglobals-true">More flexible semantics with <code class="highlighter-rouge">exactGlobals: true</code></h4>

<p>All of these behaviors can limit the flexibility of the <code class="highlighter-rouge">globals</code> map. To
remove these limitations, you can set the <code class="highlighter-rouge">exactGlobals</code> option to <code class="highlighter-rouge">true</code>.
Doing this instructs the plugin to:</p>

<ol>
  <li>always use the full import string instead of the basename when generating
the global names</li>
  <li>skip passing <code class="highlighter-rouge">globals</code> overrides to the <code class="highlighter-rouge">toIdentifier</code> function. Instead,
they are used exactly as written, so you will get errors if you do not use
valid identifiers or valid uncomputed (dot) member expressions.</li>
  <li>allow the exported global name to be overridden via the <code class="highlighter-rouge">globals</code> map. Any
override must again be a valid identifier or valid member expression.</li>
</ol>

<p>Thus, if you set <code class="highlighter-rouge">exactGlobals</code> to <code class="highlighter-rouge">true</code> and do not pass any overrides, the
first example of:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">fooBar1</span> <span class="k">from</span> <span class="s2">"foo-bar"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">fooBar2</span> <span class="k">from</span> <span class="s2">"./mylib/foo-bar"</span><span class="p">;</span>
</code></pre></div></div>

<p>will transpile to:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">factory</span><span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">fooBar</span><span class="p">,</span> <span class="nb">global</span><span class="p">.</span><span class="nx">mylibFooBar</span><span class="p">);</span>
</code></pre></div></div>

<p>And if you set the plugin options to:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"globals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"foo-bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fooBAR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"./mylib/foo-bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mylib.fooBar"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"exactGlobals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>then it’ll transpile to:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">factory</span><span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">fooBAR</span><span class="p">,</span> <span class="nb">global</span><span class="p">.</span><span class="nx">mylib</span><span class="p">.</span><span class="nx">fooBar</span><span class="p">)</span>
</code></pre></div></div>

<p>Finally, with the plugin options set to:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"external-helpers"</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="s2">"transform-es2015-modules-umd"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"globals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"my/custom/module/name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My.Custom.Module.Name"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"exactGlobals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"moduleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my/custom/module/name"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>it will transpile to:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">factory</span><span class="p">(</span><span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">);</span>
<span class="nb">global</span><span class="p">.</span><span class="nx">My</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">My</span> <span class="o">||</span> <span class="p">{};</span>
<span class="nb">global</span><span class="p">.</span><span class="nx">My</span><span class="p">.</span><span class="nx">Custom</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">My</span><span class="p">.</span><span class="nx">Custom</span> <span class="o">||</span> <span class="p">{};</span>
<span class="nb">global</span><span class="p">.</span><span class="nx">My</span><span class="p">.</span><span class="nx">Custom</span><span class="p">.</span><span class="nx">Module</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">My</span><span class="p">.</span><span class="nx">Custom</span><span class="p">.</span><span class="nx">Module</span> <span class="o">||</span> <span class="p">{};</span>
<span class="nb">global</span><span class="p">.</span><span class="nx">My</span><span class="p">.</span><span class="nx">Custom</span><span class="p">.</span><span class="nx">Module</span><span class="p">.</span><span class="nx">Name</span> <span class="o">=</span> <span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="via-cli">Via CLI</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>babel <span class="nt">--plugins</span> transform-es2015-modules-umd script.js
</code></pre></div></div>

<h3 id="via-node-api">Via Node API</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s2">"babel-core"</span><span class="p">).</span><span class="nx">transform</span><span class="p">(</span><span class="s2">"code"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="s2">"transform-es2015-modules-umd"</span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div></div>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
